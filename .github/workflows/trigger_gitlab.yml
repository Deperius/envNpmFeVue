name: Trigger GitLab Pipeline

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Build project
        run: echo "Building project..."

  trigger-gitlab:
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Trigger GitLab pipeline
        env:
          GITLAB_TRIGGER_TOKEN: ${{ secrets.GITLAB_TRIGGER_TOKEN }}
        run: |
          curl -X POST \
               -F token=$GITLAB_TRIGGER_TOKEN \
               -F ref=main \
               https://gitlab.com/api/v4/projects/76876534/trigger/pipeline
          echo "GitLab response: $response"
